var nextprev_currentContextLink;var nextprev_currentContextID;nextprev_toggle_set=function(_1,_2){if(!_ok_for_scrumjax()){return true;}var _3=document.getElementById("nextprev_tr_set"+_1);if(_3.style.display=="none"){var _4=nextprev_expand("set",_1);if(!_4.ready){_4.flickr_photosets_getContext_onLoad=_4.handleRsp;F.API.callMethod("flickr.photosets.getContext",{photoset_id:_1,photo_id:_2},_4);}}else{nextprev_collapse("set",_1);}return false;};nextprev_toggle_pool=function(_5,_6){if(!_ok_for_scrumjax()){return true;}var _7=document.getElementById("nextprev_tr_pool"+_5);if(_7.style.display=="none"){var _8=nextprev_expand("pool",_5);if(!_8.ready){_8.flickr_groups_pools_getContext_onLoad=_8.handleRsp;F.API.callMethod("flickr.groups.pools.getContext",{group_id:_5,photo_id:_6},_8);}}else{nextprev_collapse("pool",_5);}return false;};nextprev_toggle_stream=function(_9,_10){if(!_ok_for_scrumjax()){return true;}var div=document.getElementById("nextprev_tr_stream"+_9);if(div.style.display=="none"){var _12=nextprev_expand("stream",_9);if(!_12.ready){_12.flickr_photos_getContext_onLoad=_12.handleRsp;F.API.callMethod("flickr.photos.getContext",{user_id:_9,photo_id:_10},_12);}}else{nextprev_collapse("stream",_9);}return false;};nextprev_collapse=function(_13,id){var div=document.getElementById("nextprev_tr_"+_13+id);var _15=document.getElementById("contextTitle_"+_13+id);div.style.display="none";_15.style.borderBottom="1px solid #f3f3f3";div.ready=1;};nextprev_expand=function(_16,id){var div=document.getElementById("nextprev_tr_"+_16+id);var _17=_ge("nextprev_div_"+_16+id);var _18=_ge("nextprev_mover_div_"+_16+id);var _19=document.getElementById("contextInfoInner_"+_16+id);var _20=document.getElementById("photosNum_"+_16+id);var _21=document.getElementById("photosText_"+_16+id);var _22=document.getElementById("contextTitle_"+_16+id);var _23=document.getElementById("slideshowLink_"+_16+id);div.showYourself=function(){div.style.display=(document.all&&!window.opera)?"block":"table-row";_22.style.borderBottom="0px";if(!div.ready){_18.innerHTML="<img src=\"/images/context_loading.gif\" width=\"75\" height=\"75\" alt=\"\" />";}};div.showYourself();div.handleRsp=function(_24,_25,_26){if(_24){var _27=_25.documentElement.getElementsByTagName("prevphoto")[0];var _28=_27.getAttribute("id")*1;var _29="";var _30="";var _31="";var _32="";if(_27&&_28!="0"){_29=_27.getAttribute("url");_30=_27.getAttribute("thumb");_31=" href=\""+_29+"\"";_32=" title=\"Go to the previous photo in the "+_16+"\"";_ge("nextprev_arrows_prev_img_"+_16+id).style.visibility="visible";}else{_30="/images/placeholder_first_photo.gif";}var _33="<a "+_31+" class=\"contextThumbLink\" style=\"position:absolute; left:0px;\"><img "+"id=\"nextprev_thumb_"+_16+id+_28+"\" "+"class=\"nextprev_thumb\" "+"style=\"visibility:hidden;\" "+"onload=\"_decorate(this, '"+_29+"', false, '"+_16+"', '"+id+"')\" "+"src=\""+_30+"\" "+"width=\"75\" height=\"75\" "+_32+" /></a>";_17.EXT.prev_id=_28;_17.EXT.cache["p"+_28]={id:_28,url:_29,src:_30};var _34=_25.documentElement.getElementsByTagName("nextphoto")[0];var _35=_34.getAttribute("id")*1;var _36="";var _37="";var _38="";var _39="";if(_34&&_35!="0"){_36=_34.getAttribute("url");_37=_34.getAttribute("thumb");_38=" href=\""+_36+"\"";_39=" title=\"Go to the next photo in the "+_16+"\"";_ge("nextprev_arrows_next_img_"+_16+id).style.visibility="visible";}else{_37="/images/placeholder_last_photo.gif";}var _40="<a "+_38+" class=\"contextThumbLink\" style=\"position:absolute; left:78px;\"><img "+"id=\"nextprev_thumb_"+_16+id+_35+"\" "+"class=\"nextprev_thumb\" "+"style=\"visibility:hidden;\" "+"onload=\"_decorate(this, '"+_36+"', false, '"+_16+"', '"+id+"')\" "+"src=\""+_37+"\" "+"width=\"75\" height=\"75\" "+_39+" /></a>";_17.EXT.next_id=_35;_17.EXT.cache["p"+_35]={id:_35,url:_36,src:_37};_18.innerHTML=_33+_40;writeAPIDebug(_18.innerHTML);var _41=_25.documentElement.getElementsByTagName("count")[0].firstChild.nodeValue;_20.innerHTML=_41;var txt="photo";if(_41>1){txt+="s";}_21.innerHTML=txt;_23.style.display=(_41<2)?"none":"block";_19.style.visibility="visible";}else{alert("Error");}};return div;};var decorate_nextprev_button=function(_43){var EL=_43[0];EL.EXT=new NextPrev_Button_EXT(_43[0],_43[1],_43[2],_43[3]);return EL;};NextPrev_Button_EXT=function(el,_46,_47,_48){var EL=this.EL=el;var EXT=this;EXT.c_type=_46;EXT.c_id=_47;EXT.p_id=_48;EXT.closed=new Image();EXT.closed.src="/images/context_closed.gif";EXT.closed_over=new Image();EXT.closed_over.src="/images/context_closed_over.gif";EXT.closed_down=new Image();EXT.closed_down.src="/images/context_closed_click.gif";EXT.open=new Image();EXT.open.src="/images/context_open.gif";EXT.open_over=new Image();EXT.open_over.src="/images/context_open_over.gif";EXT.open_down=new Image();EXT.open_down.src="/images/context_open_click.gif";EXT.isOver=0;EXT.isDown=0;EXT.isOpen=(EXT.get_src_file()=="context_closed.gif")?0:1;EL.onmouseover=EXT.onmouseover;EL.onmouseout=EXT.onmouseout;EL.onmousedown=EXT.onmousedown;EL.onmouseup=EXT.onmouseup;};NextPrev_Button_EXT.prototype.get_src_file=function(){var EL=this.EL;var EXT=this;return EL.src.split("/").pop();};NextPrev_Button_EXT.prototype.change_src=function(){var EL=this.EL;var EXT=this;if(EXT.isOpen){if(EXT.isDown){EL.src=EXT.open_down.src;}else{if(EXT.isOver){EL.src=EXT.open_over.src;}else{EL.src=EXT.open.src;}}}else{if(EXT.isDown){EL.src=EXT.closed_down.src;}else{if(EXT.isOver){EL.src=EXT.closed_over.src;}else{EL.src=EXT.closed.src;}}}};NextPrev_Button_EXT.prototype.onmouseover=function(){var EL=this;var EXT=this.EXT;EXT.isOver=1;EXT.change_src();};NextPrev_Button_EXT.prototype.onmouseout=function(){var EL=this;var EXT=this.EXT;EXT.isOver=0;EXT.change_src();};NextPrev_Button_EXT.prototype.onmousedown=function(){var EL=this;var EXT=this.EXT;EXT.isDown=1;EXT.isOver=1;EXT.change_src();};NextPrev_Button_EXT.prototype.onmouseup=function(){var EL=this;var EXT=this.EXT;EXT.isDown=0;EXT.isOpen=!EXT.isOpen;EXT.isOver=!EXT.isOpen;EXT.change_src();window["nextprev_toggle_"+EXT.c_type](EXT.c_id,EXT.p_id);};var decorate_nextprev_thumb=function(_50){var EL=_50[0];EL.EXT=new NextPrev_Thumb_EXT(_50[0],_50[1],_50[2],_50[3],_50[4],_50[5]);return EL;};NextPrev_Thumb_EXT=function(el,url,_52,_53,_54){var EL=this.EL=el;var EXT=this;EXT.url=url;EXT.c_type=_53;EXT.c_id=_54;EXT.current=(_52)?1:0;this.init();};NextPrev_Thumb_EXT.prototype.onmouseover=function(){var EL=this;var EXT=this.EXT;};NextPrev_Thumb_EXT.prototype.onmouseout=function(){var EL=this;var EXT=this.EXT;};NextPrev_Thumb_EXT.prototype.onclick=function(e){var EL=this;var EXT=this.EXT;if(EXT.url==""){return false;}if(!e){e=window.event;}if(EXT.current){}else{if(nextprev_currentContextLink){nextprev_currentContextLink.style.fontWeight="normal";nextprev_currentContextLink.style.color="#666666";}var _56=document.getElementById("contextLink_"+EXT.c_type+EXT.c_id);_56.style.fontWeight="bold";_56.style.color="#0063DC";EL.onmouseover();if(e.metaKey||e.ctrlKey){}else{if(e.preventDefault){e.preventDefault();}if(e.stopPropagation){e.stopPropagation();}setTimeout("document.location = \""+EXT.url+"\"",500);}}};NextPrev_Thumb_EXT.prototype.init=function(){var EL=this.EL;var EXT=this;EL.onmouseover=EXT.onmouseover;EL.onmouseout=EXT.onmouseout;EL.onclick=EXT.onclick;EL.style.visibility="visible";};var decorate_nextprev_contextThumbsDiv=function(_57){var EL=_57[0];EL.EXT=new NextPrev_contextThumbsDiv_EXT(_57[0],_57[1],_57[2],_57[3],_57[4],_57[5],_57[6],_57[7],_57[8],_57[9]);return EL;};NextPrev_contextThumbsDiv_EXT=function(el,_58,_59,_60,_61,_62,_63,_64,_65,_66){var EL=this.EL=el;var EXT=this;EXT.prev_id=(_58=="")?0:_58;EXT.next_id=(_59=="")?0:_59;EXT.prev_url=_60;EXT.next_url=_61;EXT.c_type=_62;EXT.c_id=_63;EXT.current=_64;EXT.p_id=_65;EXT.url=_66;EXT.pos=0;var _67=_decorate(_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+_58),EXT.prev_url,EXT.current,EXT.c_type,EXT.c_id);var _68=_decorate(_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+_59),EXT.next_url,EXT.current,EXT.c_type,EXT.c_id);EXT.arrows_div=_decorate(_ge("nextprev_arrows_div_"+EXT.c_type+EXT.c_id),EL);EXT.cache={};if(_67&&_68&&_67!=_68){_67.parentNode.style.position="absolute";_67.parentNode.style.left="0px";_68.parentNode.style.position="absolute";_68.parentNode.style.left="78px";EXT.cache["p"+_58]={id:EXT.prev_id,url:EXT.prev_url,src:_67.src};EXT.cache["p"+_59]={id:EXT.next_id,url:EXT.next_url,src:_68.src};if(_58!=""){_ge("nextprev_arrows_prev_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";}if(_59!=""){_ge("nextprev_arrows_next_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";}}};NextPrev_contextThumbsDiv_EXT.prototype.add_thumb=function(_69,src,url,_71,_72,_73){var EL=this.EL;var EXT=this;var _74=_ge("nextprev_mover_div_"+EXT.c_type+EXT.c_id);if(_69!=0){var _75=_ge("nextprev_view_page_img_"+EXT.c_type+EXT.c_id).parentNode;_75.href=EXT.url+"with/"+_69+"/";}var _76="nextprev_thumb_"+EXT.c_type+EXT.c_id+_69;var img=_ge(_76);var _78=0;if(!img||_69==0){var a=document.createElement("a");a.style.position="absolute";a.className="contextThumbLink";img=document.createElement("img");img.src=src;img.className="nextprev_thumb";img.id=_76;img.width=img.height=75;a.style.position="absolute";_78=1;a.appendChild(img);}else{a=img.parentNode;}if(_69!=0){a.href=url;}if(_71=="prev"){EXT.pos--;var _80=EXT.pos*78;a.style.left=_80+"px";if(_69!=0){img.title="Go to the previous photo in the "+EXT.c_type;}if(_78){_74.appendChild(a);if(_74.childNodes.length>4){for(var i=0;i<_74.childNodes.length;i++){var _82=_74.childNodes[i];if(_82.childNodes[0]==_73){continue;}if(_82.childNodes[0]==_72){continue;}F.remove_el(_82,_74);break;}}}EXT.next_id=EXT.prev_id;EXT.prev_id=_69;_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+EXT.next_id).title="go to the next photo in the "+EXT.c_type;}else{if(_71=="next"){EXT.pos++;var _80=EXT.pos*78;a.style.left=(_80+78)+"px";if(_69!=0){img.title="Go to the next photo in the "+EXT.c_type;}if(_78){_74.appendChild(a);if(_74.childNodes.length>4){for(var i=0;i<_74.childNodes.length;i++){if(_74.childNodes[i].childNodes[0]==_73){continue;}if(_74.childNodes[i].childNodes[0]==_72){continue;}F.remove_el(_74.childNodes[i],_74);break;}}}EXT.prev_id=EXT.next_id;EXT.next_id=_69;_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+EXT.prev_id).title="go to the previous photo in the "+EXT.c_type;}else{return;}}if(_78){_decorate(img,url,EXT.current,EXT.c_type,EXT.c_id);}anim_do_slide_to_x(_74,5,40,-_80,"easeOutQuad",function(el){},[img]);};NextPrev_contextThumbsDiv_EXT.prototype.slide_it=function(_83,_84,_85){var EL=this.EL;var EXT=this;var _86="";var _87="";var _88=0;var cp=EXT.cache["p"+_83];var _90=_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+EXT.prev_id);var _91=_ge("nextprev_thumb_"+EXT.c_type+EXT.c_id+EXT.next_id);if(_84=="prev"&&cp&&cp.prev_id!=undefined){_ge("nextprev_arrows_next_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";if(cp.prev_id!=0){var pp=EXT.cache["p"+cp.prev_id];_86=pp.url;_87=pp.src;_88=pp.id;_ge("nextprev_arrows_prev_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";}else{_87="/images/placeholder_first_photo.gif";_ge("nextprev_arrows_prev_img_"+EXT.c_type+EXT.c_id).style.visibility="hidden";}}else{if(_84=="next"&&cp&&cp.next_id!=undefined){_ge("nextprev_arrows_prev_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";if(cp.next_id!=0){var np=EXT.cache["p"+cp.next_id];_86=np.url;_87=np.src;_88=np.id;_ge("nextprev_arrows_next_img_"+EXT.c_type+EXT.c_id).style.visibility="visible";}else{_87="/images/placeholder_last_photo.gif";_ge("nextprev_arrows_next_img_"+EXT.c_type+EXT.c_id).style.visibility="hidden";}}else{if(_85){writeDebug("should have had it in cache");return;}if(EXT.c_type=="set"){F.API.callMethod("flickr.photosets.getContext",{photoset_id:EXT.c_id,photo_id:_83},EXT);}else{if(EXT.c_type=="pool"){F.API.callMethod("flickr.groups.pools.getContext",{group_id:EXT.c_id,photo_id:_83},EXT);}else{if(EXT.c_type=="stream"){F.API.callMethod("flickr.photos.getContext",{user_id:EXT.c_id,photo_id:_83},EXT);}}}return;}}EXT.add_thumb(_88,_87,_86,_84,_90,_91);EXT.arrows_div.EXT.direction_to_move=0;};NextPrev_contextThumbsDiv_EXT.prototype.flickr_photosets_getContext_onLoad=NextPrev_contextThumbsDiv_EXT.prototype.flickr_groups_pools_getContext_onLoad=NextPrev_contextThumbsDiv_EXT.prototype.flickr_photos_getContext_onLoad=function(_94,_95,_96,_97){var EL=this.EL;var EXT=this;if(_94){var _98="";var _99="";var _100="";if(EXT.arrows_div.EXT.direction_to_move=="prev"){var _101=_95.documentElement.getElementsByTagName("prevphoto")[0];_100=_101.getAttribute("id")*1;if(_101&&_100!="0"){_98=_101.getAttribute("url");_99=_101.getAttribute("thumb");}else{_99="/images/placeholder_first_photo.gif";}EXT.cache["p"+_97.photo_id].prev_id=_100;EXT.cache["p"+_100]={next_id:_97.photo_id,id:_100,url:_98,src:_99};}else{if(EXT.arrows_div.EXT.direction_to_move=="next"){var _102=_95.documentElement.getElementsByTagName("nextphoto")[0];_100=_102.getAttribute("id")*1;if(_102&&_100!="0"){_98=_102.getAttribute("url");_99=_102.getAttribute("thumb");}else{_99="/images/placeholder_last_photo.gif";}EXT.cache["p"+_97.photo_id].next_id=_100;EXT.cache["p"+_100]={prev_id:_97.photo_id,id:_100,url:_98,src:_99};}}}else{EXT.arrows_div.EXT.direction_to_move=0;return;}EXT.slide_it(_97.photo_id,EXT.arrows_div.EXT.direction_to_move,1);};var decorate_nextprev_contextThumbsArrowsDiv=function(args){var EL=args[0];EL.EXT=new NextPrev_contextThumbsArrows_EXT(args[0],args[1]);return EL;};NextPrev_contextThumbsArrows_EXT=function(el,_104){var EL=this.EL=el;var EXT=this;EXT.contextThumbsDiv=_104;EXT.direction_to_move=0;for(var i=0;i<EL.childNodes.length;i++){var el=EL.childNodes[i];el.style.cursor=(document.all&&!window.opera)?"hand":"pointer";var _105=["left","","right"];if(i==1){var img=el.childNodes[0];img.style.visibility="visible";img.over_src="/images/context_view_page_over.gif";img.out_src="/images/context_view_page_out.gif";}else{var img=el;img.over_src="/images/context_arrow_more_"+_105[i]+"_over.gif";img.out_src="/images/context_arrow_more_"+_105[i]+"_out.gif";}img.onmouseover=function(e){this.src=this.over_src;};img.onmouseout=function(e){this.src=this.out_src;};}EL.onclick=function(e){if(EXT.direction_to_move){return;}var _106=_get_event_src(e);if(_106.className=="nextprev_arrows_img_prev"){EXT.direction_to_move="prev";EXT.contextThumbsDiv.EXT.slide_it(EXT.contextThumbsDiv.EXT.prev_id,EXT.direction_to_move);}else{if(_106.className=="nextprev_arrows_img_next"){EXT.direction_to_move="next";EXT.contextThumbsDiv.EXT.slide_it(EXT.contextThumbsDiv.EXT.next_id,EXT.direction_to_move);}else{if(_106.className=="contextThumbLink"){return;}else{return;}}}};};
