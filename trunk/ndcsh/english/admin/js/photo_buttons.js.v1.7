var decorate_photo_gne_button=function(_1){var EL=_1[0];EL.EXT=new Photo_Gne_button_EXT(_1[0],_1[1],_1[2],_1[3]);return EL;};Photo_Gne_button_EXT=function(el,_4,_5,_6){var EL=this.EL=el;var _7=this;var _8=_7.base_name=el.id.split(el.className+"_").join("");_7.lock_down=0;_7.p_id=_4;if(_8=="add_note"&&!_ok_for_scrumjax()){EL.style.display="none";return;}_7.on=new Image();_7.on.src="/images/"+_8+"_grey.gif";_7.on_over=new Image();_7.on_over.src="/images/"+_8+"_color.gif";_7.on_down=new Image();_7.on_down.src="/images/"+_8+"_color_down.gif";if(_8=="send_to_group"||_8=="send_to_set"||_8=="print"||_8=="blog_this"){_7.on_locked=new Image();_7.on_locked.src="/images/"+_8+"_color_locked.gif";}_6=(_6)?_6:_8;_7.off=new Image();_7.off.src="/images/"+_6+"_grey.gif";_7.off_over=new Image();_7.off_over.src="/images/"+_6+"_color.gif";_7.off_down=new Image();_7.off_down.src="/images/"+_6+"_color_down.gif";_7.isOver=_7.isDown=0;_7.isOff=(_5)?1:0;EL.style.cursor=(document.all)?"hand":"pointer";EL.onmouseover=function(){if(window.should_I_ignore_stuff_because_note_editing||window.should_I_ignore_stuff_because_of_editable_div_action){return;}this.EXT.isOver=1;this.EXT.change_src();};EL.onmouseout=function(){this.EXT.isOver=0;if(!this.EXT.lock_down){this.EXT.isDown=0;}this.EXT.change_src();};EL.onmousedown=function(){if(window.should_I_ignore_stuff_because_note_editing||window.should_I_ignore_stuff_because_of_editable_div_action){return;}if(this.EXT.disabled){this.EXT.enable_others();this.EXT.enable_self();}this.EXT.isDown=1;this.EXT.isOver=1;this.EXT.change_src();var _9=_ge("photo_notes");if(this.EXT.base_name!="rotate"&&_9&&_9.EXT){_9.EXT.hide_rotate_div();}if(this.EXT.base_name!="print"&&printDialogDiv){hide_printDialog();}if(this.EXT.base_name!="send_to_set"&&sendToSetDialogDiv){hide_sendToSetDialog();}if(this.EXT.base_name!="send_to_group"&&sendToGroupDialogDiv){hide_sendToGroupDialog();}if(this.EXT.base_name!="blog_this"&&sendToBlogDialogDiv){hide_sendToBlogDialog();}};EL.onmouseup=function(){if(window.should_I_ignore_stuff_because_note_editing||window.should_I_ignore_stuff_because_of_editable_div_action){return;}if(this.EXT.disabled){return;}var _10=this.EXT[this.EXT.base_name+"_action"]();this.EXT.isOver=1;if(_10==1){this.EXT.isDown=1;this.EXT.lock_down=1;}else{this.EXT.isDown=0;}this.EXT.change_src();};this.disable_others=function(){var all=document.getElementsByClass("photo_gne_button","IMG");for(var i=0;i<all.length;i++){if(all[i].EXT.base_name!=_7.base_name){all[i].EXT.disable_self();}}var _13=_ge("photo_notes");if(_13&&_13.EXT){_13.EXT.take_her_away("disable_others");}window.should_I_ignore_stuff_because_of_button_action=1;};this.enable_others=function(){var all=document.getElementsByClass("photo_gne_button","IMG");for(var i=0;i<all.length;i++){if(all[i].EXT.base_name!=_7.base_name){all[i].EXT.enable_self();}}window.should_I_ignore_stuff_because_of_button_action=0;};this.disable_self=function(){_7.disabled=1;EL.style.cursor="default";};this.enable_self=function(){_7.disabled=0;EL.style.cursor=(document.all)?"hand":"pointer";};this.change_src=function(){if(_7.disabled){return;}if(_7.lock_down){EL.src=_7.on_locked.src;}else{if(_7.isOff){if(_7.isDown){EL.src=_7.off_down.src;}else{if(_7.isOver){EL.src=_7.off_over.src;}else{EL.src=_7.off.src;}}}else{if(_7.isDown){EL.src=_7.on_down.src;}else{if(_7.isOver){EL.src=_7.on_over.src;}else{EL.src=_7.on.src;}}}}};this.delete_action=function(){setTimeout("if (confirm('Are you sure you want to delete this photo? (This cannot be undone.)'))  document.location = global_photos['"+_7.p_id+"'].deleteUrl;",50);return 0;};this.rotate_action=function(){var _14=_ge("photo_notes");if(_14&&_14.EXT){_7.disable_others();_14.EXT.show_rotate_div(EL);}return 0;};this.send_to_set_action=function(){if(_ok_for_scrumjax_xml()){if(_7.lock_down){hide_sendToSetDialog();return 0;}else{show_sendToSetDialog(_7.p_id);return 1;}}else{document.location="/photo_sendto_set.gne?id="+_7.p_id;}return 0;};this.print_action=function(){if(_ok_for_scrumjax_xml()){if(_7.lock_down){hide_printDialog();return 0;}else{show_printDialog(_7.p_id);return 1;}}else{document.location="/photo_print.gne?id="+_7.p_id;}return 0;};this.send_to_group_action=function(){if(_ok_for_scrumjax_xml()){if(_7.lock_down){hide_sendToGroupDialog();return 0;}else{show_sendToGroupDialog(_7.p_id);return 1;}}else{document.location="/photo_sendto_group.gne?id="+_7.p_id;}return 0;};this.blog_this_action=function(){if(_ok_for_scrumjax_xml()){if(_7.lock_down){hide_sendToBlogDialog();return 0;}else{show_sendToBlogDialog(_7.p_id);return 1;}}else{document.location="/blog.gne?photo="+_7.p_id;}return 0;};this.add_note_action=function(){var _15=_ge("photo_notes");if(_15&&_15.EXT){_15.EXT.start_adding_note();}return 0;};this.zoom_action=function(){document.location=global_photos[_7.p_id].zoomUrl;return 0;};this.add_to_faves_action=function(){var _16=_ge("photo_notes");var _17=_ge("fave_form");if(_7.isOff){if(_ok_for_scrumjax()){F.API.callMethod("flickr.favorites.remove",{photo_id:_7.p_id},_7);if(_16&&_16.EXT){_16.EXT.start_comming("Removing from favorites");}}else{if(_17){_17.action=page_current_url;_17.faveremove.value=1;_17.submit();}}}else{if(_ok_for_scrumjax()){F.API.callMethod("flickr.favorites.add",{photo_id:_7.p_id},_7);if(_16&&_16.EXT){_16.EXT.start_comming("Adding to favorites");}}else{if(_17){_17.action=page_current_url;_17.faveadd.value=1;_17.submit();}}}return 0;};this.flickr_favorites_add_onLoad=function(_18,_19,_20){var _21=_ge("photo_notes");_7.isOff=!_7.isOff;_7.change_src();if(_21&&_21.EXT){_21.EXT.stop_comming(1);}};this.flickr_favorites_remove_onLoad=function(_22,_23,_24){var _25=_ge("photo_notes");_7.isOff=!_7.isOff;_7.change_src();if(_25&&_25.EXT){_25.EXT.stop_comming(1);}};if(_7.isOff){_7.change_src();}};
