<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<typeAlias alias="image" type="com.ssi.dal.domain.Image" />

	<resultMap class="image" id="imageMap">
		<result column="d_id" property="id"/>
		<result column="d_article_id" property="articleId"/>
		<result column="d_title" property="title"/>
		<result column="d_name" property="name"/>
		<result column="d_imgurl" property="imgUrl"/>
		<result column="d_httpurl" property="httpUrl"/>							
		<result column="d_orderid" property="orderId"/>	
		<result column="d_time" property="time"/>						
		<result column="d_intro" property="intro"/>						
		<result column="d_commentsuburl" property="commentsuburl"/>						
		<result column="d_commentshowurl" property="commentshowurl"/>						
		<result column="d_link" property="link"/>						
		<result column="d_createtime" property="createtime"/>						
		<result column="d_status" property="status"/>						
		<result column="d_filesize" property="size"/>		
		<result property="article" column="d_article_id" select="GET_ARTICLE_BY_ID" />					
		<!-- 
		<result property="pictureFile" column="d_id" select="GET_PICTUREFILE_BY_IMAGE_ID" />					
		 -->
	</resultMap>

	<statement id="GET_IMAGE_BY_MAP"  parameterClass="java.util.Map" resultMap="imageMap">
    	SELECT DISTINCT t.* FROM TBL_IMAGE t WHERE 1 = 1 and t.d_id = #id# and t.D_LINK = #link#  ORDER BY t.d_id
    </statement>

	<statement id="GET_IMAGE_BY_ID"  parameterClass="java.lang.Integer" resultMap="imageMap">
    	SELECT DISTINCT t.* FROM TBL_IMAGE t WHERE t.d_id = #value# ORDER BY t.d_id limit 1
    </statement>
</sqlMap>



