if(!Array.prototype.push){Array.prototype.push=function(){var i=0,b=this.length,a=arguments;for(i;i<a.length;i++){this[b+i]=a[i];}return this.length;};}if(!Array.prototype.pop){Array.prototype.pop=function(){var b=this[this.length-1];this.length--;return b;};}if(!Array.prototype.shift){Array.prototype.shift=function(){var _3=this[0];for(var i=0;i<this.length-1;i++){this[i]=this[i+1];}this.length--;return _3;};}var _numeric_sort_func=function(a,b){return (a-b);};Number.prototype.addZeros=function(p){if((""+this).length>=p){return this;}return (new Array(p).join("0")+this).substr((new Array(p).join("0")+this).length-p);};Number.prototype.pretty_num=function(){var s=this.toString();sA=s.split(".");s1=sA[0];s2=(sA[1])?"."+sA[1]:"";if(s1.length<4){return s;}var _7="";for(var i=s1.length-1;i>-1;i--){if(i<s1.length-1&&(s1.length-1-i)%3==0){_7=","+_7;}_7=s1.charAt(i)+_7;}return _7+s2;};String.prototype.pretty_num=function(){return parseFloat(this).pretty_num();};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};String.prototype.nl2br=function(){return this.split("\n").join("<br />\n");};String.prototype.replace=function(_8,_9){return this.split(_8).join(_9);};String.prototype.escape_for_xml=function(){return this.replace("&","&amp;").replace("\"","&quot;").replace("<","&lt;").replace(">","&gt;");};String.prototype.unescape_from_xml=function(){return this.replace("&quot;","\"").replace("&lt;","<").replace("&gt;",">").replace("&amp;","&");};String.prototype.escape_for_display=function(){return this.replace("<","&lt;");};String.prototype.escape_for_display_and_wrap=function(){return this.replace("<","<wbr>&lt;");};String.prototype.truncate_with_ellipses=function(_10){var t=this;if(t.length>_10-3){t=t.substr(0,_10-3)+"...";}return t;};document.getElementsByClass=function(_12,_13){if(!_13){_13="*";}var _14=document.getElementsByTagName(_13);var _15=new Array();var i;var j;for(var i=0,j=0;i<_14.length;i++){var c=" "+_14[i].className+" ";if(c.indexOf(" "+_12+" ")!=-1){_15[j++]=_14[i];}}return _15;};var F={id:"F",changes_count:0,_ebA:[],_decoratedO:{}};F.array_copy=function(A){var c=[];for(var i=0;i<A.length;i++){c[i]=A[i];}return c;};F.array_copy_except=function(A,_19){var c=[];for(var i=0;i<A.length;i++){if(_19==undefined||A[i]!=_19){c.push(A[i]);}}return c;};F.array_index_of=function(A,_20){for(var i=0;i<A.length;i++){if(A[i]==_20){return i;}}return -1;};F.get_dates_from_form=function(_21,_22){var _23;var _24;var _25;var _26=_ge(_21+"date_posted_exact");var _27=_ge(_21+"time_posted_exact");if(_26){var d0A=_26.value.split("/");_23=_convert_MYSQLDateTime_into_unix_time_stamp(d0A[2]+"-"+d0A[0]+"-"+d0A[1]+" "+_27.value);if(_22>0){_23=_23+_22;}}if(_ge(_21+"date_taken_exact_div").style.display=="none"){var _29=_ge(_21+"date_taken_approx_month");var _30=_ge(_21+"date_taken_approx_year");_24=_30.options[_30.selectedIndex].value;if(_29.options[_29.selectedIndex].value!=0){_25="4";_24+="-"+_29.options[_29.selectedIndex].value+"-01";}else{_25="6";_24+="-01-01";}_24+=" 00:00:00";}else{var _31=_ge(_21+"date_taken_exact");var _32=_ge(_21+"time_taken_exact");var _33=_31.value.split("/");_25="0";_24=_33[2]+"-"+_33[0]+"-"+_33[1]+" "+_32.value;if(_22>0){var _34=_convert_MYSQLDateTime_into_unix_time_stamp(_24);_34=_34+_22;_24=_convert_unix_time_stamp_into_MYSQLDateTime(_34);}}return {date_posted:_23,date_taken:_24,date_taken_granularity:_25};};F.remove_el=function(el,p,_36){if(_36){F.drag_unreg(el);}_ge_cache_remove(el);p=(p)?p:el.parentNode;p.removeChild(el);};F.drag_unreg=function(el){if(el.fumb_target){el.fumb_target.unreg();}if(el.fumb_drag){el.fumb_drag.unreg();}if(el.set_photo_drag){el.set_photo_drag.unreg();}if(el.set_photo_target){el.set_photo_target.unreg();}if(el.set_div_drag){el.set_div_drag.unreg();}if(el.set_div_target){el.set_div_target.unreg();}for(var i=el.childNodes.length-1;i>=0;i--){var ch=el.childNodes[i];F.drag_unreg(ch);}};F.decorate=function(el,obj){if(!obj){return;}if(!el){return;}if(!el.id){writeDebug("decorated els must have ids!");return;}for(p in obj){if(p=="initialize"){continue;}el[p]=obj[p];}if(this._decoratedO[el.id]){}else{this._decoratedO[el.id]=[];}this._decoratedO[el.id].push(el);return el;};F.changes_were_made=function(){this.changes_count=1;};F.changes_were_saved=function(){this.changes_count=0;};F.make_one_photo_edit_pop=function(_39){var div=document.createElement("div");div.id="one_photo_edit_pop";document.body.appendChild(div);F.decorate(div,F._one_photo_edit_pop).pop_go_go_go(_39);return div;};F.make_batch_edit_pop=function(_41,_42){var div=document.createElement("div");div.id="batch_edit_pop";document.body.appendChild(div);F.decorate(div,F._batch_edit_pop).pop_go_go_go(_41,_42);return div;};F.make_shadow=function(_43,_44,_45,_46){var _47=(_45)?_45:document.body;var div=document.createElement("div");div.id=_43+"_shadow";if(_46&&_46.parentNode==_45){_47.insertBefore(div,_46);}else{_47.appendChild(div);}F.decorate(div,F._shadow).shadow_go_go_go(_43,_44,_47);return div;};F._carrot=new Object();F._carrot.carrot_go_go_go=function(_48,_49,_50,_51){this.carrot_open_img=new Image();if(_48=="up"){this.carrot_open_img.src="/images/caret_open_up.gif";}else{this.carrot_open_img.src="/images/caret_open_down.gif";}this.carrot_closed_img=new Image();this.carrot_closed_img.src="/images/caret_closed.gif";this.carrot_is_open=(_49)?1:0;if(this.carrot_is_open){this.carrot_open_text=(_50)?_50:this.childNodes[1].innerHTML;this.carrot_closed_text=(_51)?_51:this.carrot_open_text;}else{this.carrot_closed_text=(_51)?_51:this.childNodes[1].innerHTML;this.carrot_open_text=(_50)?_50:this.carrot_closed_text;}this.style.cursor=(document.all)?"hand":"pointer";this.onclick_default=this.onclick;this.onclick=this.carrot_onclick;};F._carrot.carrot_onclick=function(e){if(this.carrot_is_open){this.carrot_close();}else{this.carrot_open();}};F._carrot.carrot_open=function(){this.onclick_default();this.carrot_is_open=1;this.childNodes[0].src=this.carrot_open_img.src;this.childNodes[1].innerHTML=this.carrot_open_text;};F._carrot.carrot_close=function(){this.onclick_default();this.carrot_is_open=0;this.childNodes[0].src=this.carrot_closed_img.src;this.childNodes[1].innerHTML=this.carrot_closed_text;};F._shadow=new Object();F._shadow.shadow_go_go_go=function(_53,_54,_55){this.shadow_use_local_coords=(_55!=document.body);this.shadow_for_id=_53;this.style.zIndex=_54;this.style.display="none";this.style.position="absolute";this.shadow_height_plus=-14;this.shadow_width_plus=-14;this.shadow_x_plus=-0;this.shadow_y_plus=-0;var _56=""+"<table class=\"shadow_table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"padding:0px;\">"+"<tr><td width=\"11\"><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_tl.png\"></td><td id=\""+this.id+"_width_controller\"><img class=\"trans_png\" width=\"100%\" height=\"11\" src=\"/images/tc_white_shadow_t.png\"></td><td width=\"11\"><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_tr.png\"></td></tr>"+"<tr><td height=\"30\" id=\""+this.id+"_height_controller\"><img class=\"trans_png\" width=\"11\" height=\"100%\" src=\"/images/tc_white_shadow_l.png\"></td><td></td><td><img class=\"trans_png\" width=\"11\" height=\"100%\" src=\"/images/tc_white_shadow_r.png\"></td></tr>"+"<tr><td><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_bl.png\"></td><td><img class=\"trans_png\" width=\"100%\" height=\"11\" src=\"/images/tc_white_shadow_b.png\"></td><td><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_br.png\"></td></tr></table>";this.innerHTML=_56;};F._shadow.shadow_size_and_place=function(){var el=_ge(this.shadow_for_id);var x=_find_x(el,this.shadow_use_local_coords)+this.shadow_x_plus;var y=_find_y(el,this.shadow_use_local_coords)+this.shadow_y_plus;this.style.left=x+"px";this.style.top=y+"px";var w=((el.offsetWidth)+this.shadow_width_plus);if(w<0){w=0;}var h=((el.offsetHeight)+this.shadow_height_plus);if(h<0){h=0;}_ge(this.id+"_width_controller").style.width=w+"px";_ge(this.id+"_height_controller").style.height=h+"px";};F._shadow.shadow_show=function(){this.style.display="block";};F._shadow.shadow_hide=function(){this.style.display="none";};_uber_toString=function(ob,d,_63,pre){var ob=(ob)?ob:window;var d=(d)?d:1;var _63=(_63)?_63:20;var pre=(pre)?pre:"root.";var _65=[];var _66="";for(var i=0;i<d;i++){_66+="\t";}if(d==1){_uber_toString._handled_Os_and_As=[ob];_65.push("root = {\n");}for(pr in ob){try{var _67=typeof ob[pr];if(typeof ob[pr]=="object"){_67="object";if(ob[pr]==null){_67="null";}else{if(ob[pr].length!=undefined){_67="array ("+ob[pr].length+")";}}}if(ob[pr]==_uber_toString){continue;}if(typeof ob=="object"&&ob!=null&&ob.length!=undefined&&typeof ob[pr]=="function"){continue;}_65.push(_66+pre+pr+":"+_67);if(_67=="null"){_65.push(": null\n");}else{if(typeof ob[pr]=="object"){if(ob[pr].length!=undefined){_65.push(" : [");var end="]\n";}else{_65.push(" : {");var end="}\n";}if(F.array_index_of(_uber_toString._handled_Os_and_As,ob[pr])>-1){_65.push("already been iterated over");}else{if(d>_63){_65.push(d+" is too deep ("+_63+" is max)");}else{if(pr=="F"){_65.push("F (Flickr) is not iterated over");}else{if(pr=="_decoratedO"){_65.push("_decoratedO is not iterated over");}else{if(pr=="_ebA"){_65.push("_ebA is not iterated over");}else{if(pr=="_eb_listeners"){_65.push("_eb_listeners is not iterated over");}else{if(pr=="childNodes"){_65.push("childNodes is not iterated over");}else{if(pr=="previousSibling"){_65.push("previousSibling is not iterated over");}else{if(pr=="nextSibling"){_65.push("nextSibling is not iterated over");}else{if(pr=="firstChild"){_65.push("firstChild is not iterated over");}else{if(pr=="lastChild"){_65.push("lastChild is not iterated over");}else{if(pr=="parentNode"){_65.push("parentNode is not iterated over");}else{if(pr=="offsetParent"){_65.push("offsetParent is not iterated over");}else{if(pr=="style"){_65.push("style is not iterated over");}else{if(pr=="attributes"){_65.push("attributes is not iterated over");}else{if(pr=="ownerDocument"){_65.push("ownerDocument is not iterated over");}else{_uber_toString._handled_Os_and_As.push(ob[pr]);_65.push("\n"+_uber_toString(ob[pr],d+1,_63,pre+pr+".")+_66);}}}}}}}}}}}}}}}}_65.push(end);}else{if(typeof ob[pr]=="function"){_65.push(" "+ob[pr].toString().split("\n")[0].replace("function ","").replace(" {","")+"\n");}else{if(typeof ob[pr]=="string"){if(pr=="innerHTML"){_65.push(": \""+pr+"\"\n");}else{if(pr=="textContent"){_65.push(": \""+pr+"\"\n");}else{_65.push(": \""+ob[pr]+"\"\n");}}}else{_65.push(": "+ob[pr]+"\n");}}}}}catch(e){writeDebug("OI! "+e.message);_65.push(_66+pre+pr+": BARF OUT "+e.message+"\n");continue;}}if(d==1){_65.push("}\n");}return _65.join("");};var global_photos={};var global_sets={};var global_groups={};var _get_photo_src=function(p,s){var str="";if(!p||!p.src){return str;}if(!s){s="s";}var src=p.src;if(s!="s"){src=src.replace("_s","_"+s);}str=_img_root+src;if(p.src_cb){str+="?"+p.src_cb;}return str;};var _upsert_photo=function(_71){var id=_71.getAttribute("id");var src=_71.getAttribute("server")+"/"+id+"_"+_71.getAttribute("secret")+"_s.jpg";var _73=_71.getElementsByTagName("title");if(_73&&_73[0]){var _74=_73[0];var _75=(_74.firstChild)?_74.firstChild.nodeValue:"";var _76=_71.getElementsByTagName("description")[0];var _77=(_76.firstChild)?_76.firstChild.nodeValue:"";var _78=_71.getAttribute("license");var _79=_71.getElementsByTagName("visibility")[0];var _80=_79.getAttribute("ispublic");var _81=_79.getAttribute("isfriend");var _82=_79.getAttribute("isfamily");var _83=_71.getElementsByTagName("dates")[0];var _84=_83.getAttribute("taken");var _85=_83.getAttribute("takengranularity");var _86=_83.getAttribute("posted");var _87=_83.getAttribute("lastupdate");var _88=_71.getElementsByTagName("location");if(_88&&_88[0]){var _89=_88[0].getAttribute("latitude");var _90=_88[0].getAttribute("longitude");var _91=_88[0].getAttribute("accuracy");}var _92=_71.getElementsByTagName("permissions");if(_92&&_92[0]){var _93=_92[0].getAttribute("permcomment");var _94=_92[0].getAttribute("permaddmeta");}var _95=_71.getElementsByTagName("tag");_rebuild_tags_for_photos(id,_95);var _96=_71.getElementsByTagName("set");var _97=_71.getElementsByTagName("pool");}else{var _75=_71.getAttribute("title");var _84=_71.getAttribute("datetaken");var _86=_71.getAttribute("dateupload");var _89=_71.getAttribute("latitude");var _90=_71.getAttribute("longitude");var _91=_71.getAttribute("accuracy");}var p=global_photos[id];if(!p){p=global_photos[id]={id:id,title:_75,src:src};}else{p.id=id;p.title=_75;p.src=src;}p.toString=function(ob,d){var ob=(ob)?ob:this;var d=(d)?d:1;var str="";var _98="";for(var i=0;i<d;i++){_98+="\t";}if(d==1){str+="global_photos["+p.id+"] = {\n";}for(pr in ob){if(typeof ob[pr]=="function"){continue;}str+=_98+pr;if(typeof ob[pr]=="object"){if(ob[pr].length!=undefined){str+=" = [\n";str+=p.toString(ob[pr],d+1);str+=_98+"]\n";}else{str+=" = {\n";str+=p.toString(ob[pr],d+1);str+=_98+"}\n";}}else{if(typeof ob[pr]=="function"){str+=": function\n";}else{if(typeof ob[pr]=="string"){str+=": \""+ob[pr]+"\"\n";}else{str+=": "+ob[pr]+"\n";}}}}if(d==1){str+="}\n";}return str;};if(_78&&_78!=""){p.license_id=_78;}if(_84&&_84!=""){p.date_taken=_84;}if(_85!=undefined&&_85!=""){p.date_taken_granularity=_85;}if(_86&&_86!=""){p.date_upload=_86;}if(_87&&_87!=""){p.date_update=_87;}if(_89!=undefined&&_89!=""){p.latitude=_89;}if(_90!=undefined&&_90!=""){p.longitude=_90;}if(_91!=undefined&&_91!=""){p.accuracy=_91;}if(_77!=undefined){p.description=_77;}if(_80!=undefined){p.is_public=_80;}if(_81!=undefined){p.is_friend=_81;}if(_82!=undefined){p.is_family=_82;}if(_93!=undefined){p.perm_comment=_93;}if(_94!=undefined){p.perm_addmeta=_94;}if(_96&&_96.length){p.sets=[];for(var i=0;i<_96.length;i++){p.sets.push(_96[i].getAttribute("id"));}}if(_97&&_97.length){p.pools=[];for(var i=0;i<_97.length;i++){p.pools.push(_97[i].getAttribute("id"));}}return p;};var _upsert_set=function(_99){var id=_99.getAttribute("id");var _100=_99.getAttribute("primary");var _101=_99.getAttribute("server");var _102=_99.getAttribute("secret");var _103=_99.getAttribute("id");var _104=_99.getAttribute("photos");var _105=_99.getElementsByTagName("photo");if(_100&&_100!=""){var p=global_photos[_100];if(!p){p=global_photos[_100]={};p.id=_100;}if(_101&&_101!=""&&_102&&_102!=""){p.src=_101+"/"+p.id+"_"+_102+"_s.jpg";}}var _106=_99.getElementsByTagName("title");if(_106&&_106[0]&&_106[0].firstChild){var _107=_106[0].firstChild.nodeValue;}else{var _107=_99.getAttribute("title");}var _108=_99.getElementsByTagName("description");if(_108&&_108[0]){if(_108[0].firstChild){var _109=_108[0].firstChild.nodeValue;}else{var _109="";}}var s=global_sets[id];if(!s){s=global_sets[id]={id:id,primary_photo_id:_100,photo_idsA:[]};}else{s.id=id;s.primary_photo_id=_100;}if(_103&&_103!=""){s.owner=_103;}if(_107&&_107!=""){s.title=_107;}if(_109!=undefined){s.description=_109;}var _105=_99.getElementsByTagName("photo");if(_105&&_105.length){s.count=_105.length;s.photo_idsA=[];for(var i=0;i<_105.length;i++){var p=_upsert_photo(_105[i]);s.photo_idsA.push(p.id);}}else{if(_104!=""){s.count=_104;}}return s;};var global_reg_photo_print_ids=[1,2,3];var global_dig_photo_print_ids=[29,30,31];var global_huge_photo_print_ids=[18];var global_square_photo_print_ids=[23];var global_wallet_photo_print_ids=[32];var writeDebug=function(){};var writeAPIDebug=function(){};var timer=function(){};timer.prototype.add=function(){};timer.prototype.add_child=function(){};timer.prototype.clear=function(){};timer.prototype.get_text=function(){};timer.prototype.dump=function(){};var _page_timer=new timer("page","start");var _pi=function(str){return parseInt(str,10);};var _pf=function(str){return parseFloat(str);};_ge_cache_obj={};_ge_cache_retrieve=function(id){return _ge_cache_obj[id];};_ge_cache_add=function(el){_ge_cache_obj[el.id]=el;};_ge_cache_remove=function(el){if(!el){return;}if(el.id&&_ge_cache_obj[el.id]){_ge_cache_obj[el.id]=null;delete _ge_cache_obj[el.id];}for(var i=el.childNodes.length-1;i>-1;i--){_ge_cache_remove(el.childNodes[i]);}};var _ge=function(id){el=document.getElementById(id);return el;};var _ok_for_swf=function(){if(actualVersion<6){return false;}return true;var ua=navigator.userAgent;if(navigator.appVersion.toLowerCase().indexOf("mac")>0){if(ua.indexOf("Gecko")==-1){return false;}}else{if(ua.indexOf("MSIE 5.6")>0||ua.indexOf("MSIE 5.5")>0||ua.indexOf("MSIE 6")>0||ua.indexOf("MSIE 7")>0){}else{if(ua.indexOf("Gecko")==-1){return false;}}}return true;};var _ok_for_scrumjax_xml=function(){if(global_fakeOperaXMLHttpRequestSupport){return false;}return _ok_for_scrumjax();};var _ok_for_scrumjax=function(){if(!window.XMLHttpRequest){return false;}if(navigator.appVersion.toLowerCase().indexOf("mac")>0&&navigator.userAgent.indexOf("MSIE")>0&&navigator.userAgent.indexOf("Opera")==-1){return false;}return true;};var global_today=new Date();var global_tm=global_today.getMonth()+1;var global_td=global_today.getDate();var global_ty=global_today.getFullYear();var global_days_in_months=[31,0,31,30,31,30,31,31,30,31,30,31];var global_mn=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var _get_month_index=function(m){var cm=m.substr(0,3).toUpperCase();for(var i=0;i<global_mn.length;i++){if(cm==global_mn[i]){return i;}}return -1;};_make_unix_time_stamp=function(_113,_114,_115,inHr,_117,_118){var _119=new Date(_113,_114-1,_115,inHr,_117,_118);return _119.getTime()/1000;};_convert_unix_time_stamp=function(_120){return new Date(_120*1000);};_convert_unix_time_stamp_into_MYSQLDateTime=function(_121){var ld=new Date((_121*1000));return _make_MYSQLDateTime_stamp(ld.getFullYear(),(ld.getMonth()+1).addZeros(2),ld.getDate().addZeros(2),ld.getHours().addZeros(2),ld.getMinutes().addZeros(2),ld.getSeconds().addZeros(2));};_make_MYSQLDateTime_stamp=function(_123,_124,_125,inHr,_126,_127){var txt="";if(_123!=undefined){txt+=_123;}else{return txt;}if(_124!=undefined){txt+="-"+_124;}else{return txt;}if(_125!=undefined){txt+="-"+_125;}else{return txt;}if(inHr!=undefined){txt+=" "+inHr;}else{return txt;}if(_126!=undefined){txt+=":"+_126;}else{return txt;}if(_127!=undefined){txt+=":"+_127;}else{return txt;}return txt;};_convert_MYSQLDateTime_into_unix_time_stamp=function(_129){var _130=_convert_MYSQLDateTime(_129);return Math.floor(_130.getTime()/1000);};_convert_MYSQLDateTime=function(_131){var both=_131.split(" ");var cal=both[0].split("-");var tim=both[1].split(":");return new Date(cal[0],(cal[1]*1)-1,cal[2],tim[0],tim[1],tim[2]);};var _in_array=function(_135,_136){for(var i=_136.length-1;i>-1;i--){if(_136[i]==_135){return true;}}return false;};var _disable_select=function(){document.onselectstart=new Function("return false");};var _enable_select=function(){document.onselectstart=new Function("return true");};var _limit_textarea=function(_137,max){if(_137.value.length>max){_137.value=_137.value.substring(0,max);}};var _el_is_in_a_link=function(el){var p=el;while(p){if(p.href){return 1;}p=p.parentNode;}return 0;};var _get_event_src=function(e){if(e&&e.target){return e.target;}if(e&&e.srcElement){return e.srcElement;}if(window.event){return window.event.srcElement;}return null;};var _get_event_keycode=function(e){if(e){return e.keyCode;}if(window.event){return window.event.keyCode;}return null;};var _keys={TAB:9,ENTER:13,RIGHTARROW:39,DOWNARROW:40,UPARROW:38,BACKSPACE:8,CTRL:17,ESCAPE:27};var _hitch=function(obj,meth){return function(){return obj[meth].apply(obj,arguments);};};var _find_x=function(el,_140){if(_140){if(el.style.left){return _pi(el.style.left);}return el.offsetLeft;}var _141=0;if(el.offsetParent){while(el.offsetParent){_141+=el.offsetLeft;el=el.offsetParent;}}else{if(el.x){_141+=el.x;}}return _141;};var _find_y=function(el,_142){if(_142){if(el.style.top){return _pi(el.style.top);}return el.offsetTop;}var _143=0;if(el.offsetParent){while(el.offsetParent){_143+=el.offsetTop;el=el.offsetParent;}}else{if(el.y){_143+=el.y;}}return _143;};myPos={getPos:function(el){return [_find_x(el),_find_y(el)];return [_find_x(el,1),_find_y(el,1)];},getY:function(el){return _find_y(el);return _find_y(el,1);},getX:function(el){return _find_x(el);return _find_x(el,1);}};var _find_screen_height=function(){if(window.innerHeight){return window.innerHeight;}else{if(document.documentElement.clientHeight){return document.documentElement.clientHeight;}else{if(document.body.clientHeight){return document.body.clientHeight;}}}};var _find_screen_width=function(){if(window.innerWidth){return window.innerWidth;}else{if(document.documentElement.clientWidth){return document.documentElement.clientWidth;}else{if(document.body.clientWidth){return document.body.clientWidth;}}}};var _decorate=function(){var el=arguments[0];if(!el){return;}arguments[0]=el;var _144="decorate_"+el.className;if(window[_144]){return window[_144](arguments);}writeDebug(_144+" is not a function");};var _pretty_list=function(list){if(list.length==1){return list[0];}else{if(list.length==2){return list.join(" and ");}else{var last=list.pop();return list.join(", ")+" and "+last;}}};var _hyperlink=function(txt){if(txt.indexOf("http://")>-1){var txtA=txt.split("\n");for(var y=0;y<txtA.length;y++){var _148=txtA[y].split(" ");for(var t=0;t<_148.length;t++){var _149="";if(_148[t].substr(0,1)=="("){_148[t]=_148[t].replace("(","");_149="(";}if(_148[t].substr(0,7)=="http://"){var url=_148[t];var _151="";if(url.substr(url.length-1,1)==")"){url=url.substr(0,url.length-1);_151=")";}var _152="";if(url.substr(url.length-1,1)=="."){url=url.substr(0,url.length-1);_152=".";}_148[t]="<a href=\""+url+"\" onclick=\"\">"+url+"</a>"+_151+_152;}_148[t]=_149+_148[t];}txtA[y]=_148.join(" ");}txt=txtA.join("<br />");}return txt;};var global_js_tip_count=0;var _get_tip_html=function(txt,_153){if(txt.length==0){return "";}global_js_tip_count++;_153=(_153==undefined)?"Tip":_153;var _154="<span style=\"display: none;\" id=\"js_tooltip_"+global_js_tip_count+"\">"+txt+"</span>"+"<span class=\""+_153+"\">[<a href=\"#\" onclick=\"this.blur(); show_tooltip(this, 'js_tooltip_"+global_js_tip_count+"', "+txt.length+"); return false;\">?</a>]</span>";return _154;};var _set_cookie=function(name,_156,days){var _158="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));_158="; expires="+date.toGMTString();}var str=name+"="+_156+_158+"; path=/";document.cookie=str;};var _get_cookie=function(name){var _160=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length);}if(c.indexOf(_160)==0){return c.substring(_160.length,c.length);}}return null;};var _delete_cookie=function(name){_set_cookie(name,"",-1);};var _rebuild_tags_for_photos=function(_162,tags){if(global_photos[_162]==undefined){return;}global_photos[_162].tagsA=[];global_photos[_162].tags_rawA=[];global_photos[_162].tags_idA=[];global_photos[_162].tags_canDeleteA=[];for(var t=0;t<tags.length;t++){var node=tags[t];var tag=node.firstChild.nodeValue;var _166=node.getAttribute("raw");var _167=node.getAttribute("id");var _168=node.getAttribute("author");var _169=(global_photos[_162].isOwner||global_nsid==_168)?true:false;global_photos[_162].tagsA.push(tag);global_photos[_162].tags_rawA.push(_166);global_photos[_162].tags_idA.push(_167);global_photos[_162].tags_canDeleteA.push(_169);}};var global_single_shadow_div;var _make_single_shadow=function(div,_170,_171,_172,_173){if(div==undefined){div=document.createElement("div");div.style.position="absolute";div.style.top="0px";div.style.left="0px";document.body.appendChild(div);}window.global_single_shadow_height_plus=(_170==undefined)?(12-24):_170;window.global_single_shadow_width_plus=(_171==undefined)?(12-24):_171;window.global_single_shadow_x_plus=(_172==undefined)?(-3):_172;window.global_single_shadow_y_plus=(_173==undefined)?(-3):_173;var html="";html+="<table class=\"shadow_table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"padding:0px;\">";html+="<tr><td width=\"11\"><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_tl.png\"></td><td id=\"shadow_width_controller\"><img class=\"trans_png\" width=\"100%\" height=\"11\" src=\"/images/tc_white_shadow_t.png\"></td><td width=\"11\"><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_tr.png\"></td></tr>";html+="<tr><td height=\"30\" id=\"shadow_height_controller\"><img class=\"trans_png\" width=\"11\" height=\"100%\" src=\"/images/tc_white_shadow_l.png\"></td><td></td><td><img class=\"trans_png\" width=\"11\" height=\"100%\" src=\"/images/tc_white_shadow_r.png\"></td></tr>";html+="<tr><td><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_bl.png\"></td><td><img class=\"trans_png\" width=\"100%\" height=\"11\" src=\"/images/tc_white_shadow_b.png\"></td><td><img class=\"trans_png\" width=\"11\" height=\"11\" src=\"/images/tc_white_shadow_br.png\"></td></tr></table>";div.innerHTML=html;div.style.zIndex="999";div.style.display="none";div.id="shadow_div";window._set_single_shadow_x=function(_175){div.style.marginLeft=(_175+global_single_shadow_x_plus)+"px";};window._set_single_shadow_y=function(_176){div.style.marginTop=(_176+global_single_shadow_y_plus)+"px";};window._set_single_shadow_height=function(_177){var el=_ge("shadow_height_controller");if(!el){return;}var d=((_177.offsetHeight)+global_single_shadow_height_plus);if(d<0){d=0;}el.style.height=d+"px";};window._set_single_shadow_width=function(_178){var el=_ge("shadow_width_controller");if(!el){return;}var d=((_178.offsetWidth)+global_single_shadow_width_plus);if(d<0){d=0;}el.style.width=d+"px";};window.global_single_shadow_div=div;};var global_comm_div;var _make_comm_div=function(_179){var div=_ge("comm_div");if(!div){div=document.createElement("DIV");div.id="comm_div";div.style.left=0;div.style.top=0;document.body.appendChild(div);div.modal_blocker=document.createElement("DIV");div.modal_blocker.id="modal_blocker";div.modal_blocker.style.position="absolute";div.modal_blocker.style.top=0;div.modal_blocker.default_style={};div.modal_blocker.style.backgroundColor=div.modal_blocker.default_style.backgroundColor="#999";div.modal_blocker.style.opacity=div.modal_blocker.default_style.opacity=".5";div.modal_blocker.style.filter=div.modal_blocker.default_style.filter="alpha(opacity=50)";document.body.appendChild(div.modal_blocker);}var html=""+"<table id=\"comm_table\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:200px; padding:0px;\">"+"<tr>"+"<td width=\"3\"><img width=\"3\" height=\"3\" src=\"/images/tc_white_tl.gif\"></td>"+"<td class=\"td_white\"></td>"+"<td class=\"td_white\"></td>"+"<td width=\"3\"><img width=\"3\" height=\"3\" src=\"/images/tc_white_tr.gif\"></td>"+"</tr>"+"<tr>"+"<td class=\"td_white\"></td>"+"<td class=\"td_white\" style=\"padding:3px 0px 0px 0px\" width=\"1\" valign=\"top\"><img id=\"comm_pulser_img\" src=\"/images/pulser2.gif\" width=\"32\" height=\"15\" border=\"0\"></td>"+"<td class=\"td_white\" style=\"padding:3px; font-family:arial; font-size:12px;\" id=\"comm_td\">"+"<div id=\"comm_msg_div\"></div>"+"<div id=\"comm_form_div\" style=\"display:none;\"></div>"+"<div id=\"comm_progress_bar_div_wrapper\" style=\"display:none; border:1px solid black; margin-top:10px;\">"+"<div id=\"comm_progress_bar_div_inner\" style=\"width:300px; height:15px\">"+"<div id=\"comm_progress_bar_div\" style=\"height:100%; width:0%; background-color:#FF0084\"></div>"+"</div>"+"</div>"+"</td>"+"<td class=\"td_white\"></td>"+"</tr>"+"<tr id=\"comm_button_tr\">"+"<td class=\"td_white\"></td>"+"<td class=\"td_white\"></td>"+"<td class=\"td_white\" style=\"padding:3px\">"+"<form>"+"<nobr><input id=\"comm_button_ok\" type=\"button\" class=\"Butt\" value=\"OK\" onclick=\"this.onclick_func();\" style=\"margin:5px 5px 0 0;\">"+"<input id=\"comm_button_cancel\" type=\"button\" class=\"CancelButt\" value=\"CANCEL\" onclick=\"this.onclick_func();\" style=\"margin:5px 5px 0 0;\"></nobr>"+"</form>"+"</td>"+"<td class=\"td_white\"></td>"+"</tr>"+"<tr>"+"<td><img width=\"3\" height=\"3\" src=\"/images/tc_white_bl.gif\"></td>"+"<td class=\"td_white\"></td>"+"<td class=\"td_white\"></td>"+"<td><img width=\"3\" height=\"3\" src=\"/images/tc_white_br.gif\"></td>"+"</tr>"+"</table>";div.innerHTML=html;div.button_tr=_ge("comm_button_tr");div.pulser_img=_ge("comm_pulser_img");div.button_ok=_ge("comm_button_ok");div.button_cancel=_ge("comm_button_cancel");div.button_ok.onclick_func=function(){div.stop_comming();this.blur();if(typeof this.onclick_plus=="function"){this.onclick_plus();}if(typeof this.onclick_do=="function"){this.onclick_do();}};div.button_cancel.onclick_func=function(){div.stop_comming();this.blur();if(typeof this.onclick_plus=="function"){this.onclick_plus();}if(typeof this.onclick_do=="function"){this.onclick_do();}};div.table=_ge("comm_table");div.comm_msg_div=_ge("comm_msg_div");div.comm_form_div=_ge("comm_form_div");div.comm_progress_bar_div_wrapper=_ge("comm_progress_bar_div_wrapper");div.style.zIndex=_179;div.style.display="none";if(div.modal_blocker){div.modal_blocker.style.zIndex=998;div.modal_blocker.style.display="none";}div.stop_comming=function(){if(this.modal_blocker){div.modal_blocker.style.zIndex=998;this.modal_blocker.style.display="none";}this.style.display="none";global_single_shadow_div.style.display="none";div.comm_form_div.style.display="none";div.comm_progress_bar_div_wrapper.style.display="none";_ge("comm_progress_bar_div").style.width=0;this.comming=0;};div.change_comming_msg=function(msg,perc){if(!msg){return;}this.comm_msg_div.innerHTML=msg;var w=Math.ceil(perc*_ge("comm_progress_bar_div_inner").offsetWidth);anim_do_width_to(_ge("comm_progress_bar_div"),8,30,w);_set_single_shadow_height(this.table);_set_single_shadow_width(this.table);};div.get_rid_of_form=function(){if(!div.comm_form_div.childNodes[0]){return;}var _182=div.comm_form_div.childNodes[0];_182.style.display="none";if(_182.old_parentNode){_182.old_parentNode.appendChild(_182);}else{F.remove_el(_182,div.comm_form_div);}div.comm_form_div.style.display="none";};div.start_comming=function(msg,_183,_184,_185,_186,_187,_188,_189,_190,_191,_192,_193,_194){var txt=(!msg)?"working...":msg;this.comm_msg_div.innerHTML=txt;div.comm_form_div.style.display="none";if(_192){div.get_rid_of_form();div.comm_form_div.style.display="block";_192.style.display="block";if(_192.old_parentNode!=div.comm_form_div){_192.old_parentNode=_192.parentNode;}div.comm_form_div.appendChild(_192);}div.comm_progress_bar_div_wrapper.style.display="none";if(_194){div.comm_progress_bar_div_wrapper.style.display="block";}this.pulser_img.style.display=(_185)?"none":"inline";if(_186||_189){this.button_tr.style.display=(document.all&&!window.opera)?"block":"table-row";this.button_ok.value=(_187)?_187.toUpperCase():"OK";this.button_tr.style.display=(document.all&&!window.opera)?"block":"table-row";this.button_ok.onclick_do=(typeof _188=="function")?_188:null;this.button_ok.style.visibility=(_186)?"visible":"hidden";this.button_ok.style.display=(_186)?"inline":"none";this.button_cancel.value=(_190)?_190.toUpperCase():"CANCEL";this.button_cancel.onclick_do=(typeof _191=="function")?_191:null;this.button_cancel.style.visibility=(_189)?"visible":"hidden";this.button_tr.style.display=(document.all&&!window.opera)?"block":"table-row";_ge("comm_table").style.width="312px";}else{this.button_tr.style.display="none";_ge("comm_table").style.width="200px";}this.style.display="block";if(_193&&this.modal_blocker){this.modal_blocker.style.display="block";this.modal_blocker.style.backgroundColor=(_193.backgroundColor)?_193.backgroundColor:div.modal_blocker.default_style.backgroundColor;this.modal_blocker.style.opacity=(_193.opacity)?_193.opacity:div.modal_blocker.default_style.opacity;this.modal_blocker.style.filter=(_193.filter)?_193.filter:div.modal_blocker.default_style.filter;}if(window.innerWidth){var ww=window.innerWidth;var wh=window.innerHeight;var bgX=window.pageXOffset;var bgY=window.pageYOffset;}else{var ww=document.body.clientWidth;var wh=document.body.clientHeight;var bgX=document.body.scrollLeft;var bgY=document.body.scrollTop;}var _199=function(){var x=bgX+_pi((ww-_pi(global_comm_div.table.offsetWidth))/2);return x;};var _200=function(){var y=bgY+_pi((wh-global_comm_div.table.offsetHeight)/2);return y;};var x=(typeof _183=="function")?_183():(typeof _183=="number")?_183:_199();var y=(typeof _184=="function")?_184():(typeof _184=="number")?_184:_200();this.style.marginLeft=x+"px";this.style.marginTop=y+"px";if(_193&&this.modal_blocker){if(_193.loc_style){this.modal_blocker.style.top=_193.loc_style.top+"px";this.modal_blocker.style.left=_193.loc_style.left+"px";this.modal_blocker.style.width=_193.loc_style.width+"px";this.modal_blocker.style.height=_193.loc_style.height+"px";}else{this.modal_blocker.style.top=bgY+"px";this.modal_blocker.style.left=bgX+"px";this.modal_blocker.style.width=ww+"px";this.modal_blocker.style.height=wh+"px";}}_set_single_shadow_x(x);_set_single_shadow_y(y);_set_single_shadow_height(this.table);_set_single_shadow_width(this.table);global_single_shadow_div.style.display="block";if(_186&&navigator.userAgent.indexOf("KHTML")==-1){this.button_ok.focus();}this.comming=1;};window.global_comm_div=div;if(!global_single_shadow_div){_make_single_shadow(_ge("shadow_div"));}return global_comm_div;};F._eb=new Object();F._eb.eb_go_go_go=function(){this._eb_listeners=[];F._ebA.push(this);};JS_is_wonderful_as_AS=false;F._eb.eb_broadcast=function(){if(JS_is_wonderful_as_AS){var _201=arguments.shift();}else{var _202=[];for(var i=0;i<arguments.length;i++){_202[i]=arguments[i];}var _201=_202.shift();}var list=F.array_copy(this._eb_listeners);var max=list.length;for(var i=0;i<max;++i){if(list[i][_201]){list[i][_201].apply(list[i],_202);}else{}}};F._eb.eb_add=function(obj){this.eb_remove(obj);this._eb_listeners.push(obj);return (true);};F._eb.eb_remove=function(obj){var list=this._eb_listeners;var i=list.length;while(i--){if(list[i]==obj){list.splice(i,1);return (true);}}return (false);};F._eb.eb_remove_all=function(){this._eb_listeners=[];};F.decorate(F,F._eb).eb_go_go_go();window.onresize=function(){F.eb_broadcast("window_onresize");};window.onbeforeunload=function(){F.eb_broadcast("window_onbeforeunload",F.changes_count);if(F.changes_count){return "You have unsaved changes.";}};window.onblur=function(){window.blurred=1;};window.onfocus=function(){window.blurred=0;};window.onunload=function(){F.eb_broadcast("window_unload");_ge_cache_obj={};for(var i=F._ebA.length-1;i>=0;i--){var eb=F._ebA[i];eb.eb_remove_all();}F._ebA=[];F._decoratedO={};};function _change_privacy(id){var _204=_ge("is_private_"+id).checked;_ge("is_friend_"+id).disabled=!_204;_ge("is_family_"+id).disabled=!_204;}function _get_qs_args(){var args={};var _206=location.search.substring(1).split("&");for(var i=0;i<_206.length;i++){var p=_206[i].indexOf("=");if(p!=-1){var name=_206[i].substring(0,p);var _207=_206[i].substring(p+1);args[name]=unescape(_207);}}return args;}var _qs_args=_get_qs_args();var promos_show=function(_208){var _209=_ge(_208);var _210=_ge(_208+"_promo_div");var _211=_ge(_208+"_removed_div");if(!_210){return;}var _212={};if(_208=="promo_do_more"){_212["promos_hide_do_more"]=0;}else{if(_208=="promo_reupgrade"){_212["promos_hide_reupgrade"]=0;}else{if(_208=="promo_proexpire"){_212["promos_hide_proexpire"]=0;}else{if(_208=="promo_intro"){_212["promos_hide_intro"]=0;}else{return false;}}}}_210.flickr_prefs_setPrefs_onLoad=function(){};F.API.callMethod("flickr.prefs.setPrefs",_212,_210);_210.style.visibility="visible";_211.style.display="none";};var promos_remove=function(_213){var _214=_ge(_213);var _215=_ge(_213+"_promo_div");var _216=_ge(_213+"_removed_div");if(!_215){return;}var _217={};if(_213=="promo_do_more"){_217["promos_hide_do_more"]=1;}else{if(_213=="promo_reupgrade"){_217["promos_hide_reupgrade"]=1;}else{if(_213=="promo_proexpire"){_217["promos_hide_proexpire"]=1;}else{if(_213=="promo_intro"){_217["promos_hide_intro"]=1;}else{return false;}}}}_215.flickr_prefs_setPrefs_onLoad=function(){};F.API.callMethod("flickr.prefs.setPrefs",_217,_215);_215.style.visibility="hidden";_216.style.display="block";_214.style.backgroundColor="#FFFFFF";setTimeout("anim_do_pink_fade(_ge(\""+_214.id+"\"))",300);};function _privacy_specific_change(_218,_219){_218=(_218)?_218:"";var _220=_ge(_218+"is_private").checked;var _221=_ge(_218+"is_friend").checked;var _222=_ge(_218+"is_family").checked;var _223=!_220;_ge(_218+"is_friend").disabled=!_220;_ge(_218+"is_family").disabled=!_220;_ge(_218+"is_friend_label").style.color=_220?"black":"silver";_ge(_218+"is_family_label").style.color=_220?"black":"silver";if(_220){if(_221||_222){_privacy_check_boxes(_218+"perm_comment",false,false,true,true);_privacy_check_boxes(_218+"perm_addmeta",false,false,true,true);}else{_privacy_check_boxes(_218+"perm_comment",false,true,true,true);_privacy_check_boxes(_218+"perm_addmeta",false,true,true,true);}}else{_privacy_check_boxes(_218+"perm_comment",false,false,false,false);_privacy_check_boxes(_218+"perm_addmeta",false,false,false,false);}if(!_219&&(previous_public!=_223||previous_friend!=_221||previous_family!=_222)){_privacy_try_and_check(_218+"perm_comment",1);_privacy_try_and_check(_218+"perm_addmeta",2);previous_public=_223;previous_friend=_221;previous_family=_222;}}function _privacy_default_change(){var _224=_ge("is_private").checked;var _225=_ge("is_friend").checked;var _226=_ge("is_family").checked;var _227=!_224;_ge("is_friend").disabled=!_224;_ge("is_family").disabled=!_224;_ge("is_friend_label").style.color=_224?"black":"silver";_ge("is_family_label").style.color=_224?"black":"silver";_ge("perm_addmeta_disclaim").style.display=_224?"block":"none";_ge("perm_comment_disclaim").style.display=_224?"block":"none";if(_224){if(_225||_226){_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false);}else{_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false);}}else{_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false);}}function _privacy_check_boxes(name,a,b,c,d){_ge(name+"_4").disabled=a;_ge(name+"_3").disabled=b;_ge(name+"_2").disabled=c;_ge(name+"_1").disabled=d;_ge(name+"_4_label").style.color=a?"silver":"black";_ge(name+"_3_label").style.color=b?"silver":"black";_ge(name+"_2_label").style.color=c?"silver":"black";_ge(name+"_1_label").style.color=d?"silver":"black";var _228=false;for(var i=4;i>=1;i--){if(_ge(name+"_"+i).checked&&!_ge(name+"_"+i).disabled){return;}}for(var i=1;i<=4;i++){if(!_ge(name+"_"+i).disabled){_ge(name+"_"+i).checked=true;return;}}}function _privacy_try_and_check(name,min){for(var i=min;i<=4;i++){if(!_ge(name+"_"+i).disabled){_ge(name+"_"+i).checked=true;return;}}}function _privacy_show_more(){_ge("morerow").style.display="none";_ge("lessrow").style.display=(document.all)?"block":"table-row";_ge("detailrow").style.display=(document.all)?"block":"table-row";}function _privacy_show_less(){_ge("morerow").style.display=(document.all)?"block":"table-row";_ge("lessrow").style.display="none";_ge("detailrow").style.display="none";}
